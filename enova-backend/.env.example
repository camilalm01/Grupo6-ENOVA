# ===========================================
# Configuraci√≥n de Red
# ===========================================
GATEWAY_PORT=3000
AUTH_SERVICE_HOST=localhost
AUTH_SERVICE_PORT=3001
CHAT_SERVICE_HOST=localhost
CHAT_SERVICE_PORT=3002
COMMUNITY_SERVICE_HOST=localhost
COMMUNITY_SERVICE_PORT=3003

# ===========================================
# Redis (Para Socket.io Adapter + Idempotencia)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ===========================================
# RabbitMQ (Para Saga Pattern)
# ===========================================
RABBITMQ_URL=amqp://enova:enova_secret@localhost:5672
RABBITMQ_QUEUE_AUTH=auth_events
RABBITMQ_QUEUE_COMMUNITY=community_events
RABBITMQ_QUEUE_CHAT=chat_events

# ===========================================
# Rate Limiting
# ===========================================
RATE_LIMIT_TTL=60000
RATE_LIMIT_MAX=100

# ===========================================
# Circuit Breaker
# ===========================================
CB_TIMEOUT=5000
CB_ERROR_THRESHOLD=50
CB_RESET_TIMEOUT=30000

# ===========================================
# Supabase
# ===========================================
SUPABASE_URL=https://xxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...
SUPABASE_JWT_SECRET=your-jwt-secret
SUPABASE_JWKS_URL=https://xxxx.supabase.co/auth/v1/.well-known/jwks.json
JWKS_CACHE_TTL=3600000

# ===========================================
# Database per Service (Partitioned)
# ===========================================
AUTH_DATABASE_URL=https://auth-db.supabase.co
COMMUNITY_DATABASE_URL=https://community-db.supabase.co
CHAT_DATABASE_URL=https://chat-db.supabase.co

# ===========================================
# CORS
# ===========================================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ===========================================
# Service-to-Service Security
# ===========================================
INTERNAL_SERVICE_KEY=change-this-in-production
ENABLE_INTERNAL_AUTH=false

# ===========================================
# WebSocket Authentication
# ===========================================
WS_AUTH_ENABLED=true

# ===========================================
# Data Migration Phase
# ===========================================
# Phases: legacy_only, dual_write, shadow_read, new_primary, new_only
MIGRATION_PHASE=legacy_only

# ===========================================
# OpenTelemetry (Observability)
# ===========================================
OTEL_ENABLED=false
OTEL_SERVICE_NAME=enova-backend
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317

# ===========================================
# Logging
# ===========================================
LOG_LEVEL=debug
LOG_FORMAT=pretty
NODE_ENV=development

