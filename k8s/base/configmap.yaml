apiVersion: v1
kind: ConfigMap
metadata:
  name: enova-config
  namespace: enova
data:
  # Node Environment
  NODE_ENV: "production"

  # Service URLs (internal K8s DNS)
  AUTH_SERVICE_URL: "http://auth-service:3001"
  COMMUNITY_SERVICE_URL: "http://community-service:3003"
  CHAT_SERVICE_URL: "http://chat-service:3002"

  # RabbitMQ
  RABBITMQ_URL: "amqp://rabbitmq:5672"

  # Redis
  REDIS_HOST: "redis-master"
  REDIS_PORT: "6379"

  # CORS
  ALLOWED_ORIGINS: "https://enova.app,https://www.enova.app"

  # Rate Limiting
  THROTTLE_TTL: "60"
  THROTTLE_LIMIT: "100"

  # Migration Phase (initially legacy_only, then dual_write)
  MIGRATION_PHASE: "legacy_only"

  # WebSocket
  WS_AUTH_ENABLED: "true"

  # Logging
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # OpenTelemetry
  OTEL_SERVICE_NAME: "enova"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://jaeger-collector:4317"
  OTEL_TRACES_SAMPLER: "parentbased_traceidratio"
  OTEL_TRACES_SAMPLER_ARG: "0.1"
